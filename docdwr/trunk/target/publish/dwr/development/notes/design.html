<!DOCTYPE html>
<html>
<head>
  <title>Design Notes</title>
  <meta name='alias' content='/dwr/development/design'>
  <link rel="stylesheet" type="text/css" href="../../media/styles.css">
  <script type='text/javascript' src='../../../dwr/media/dojo.js'> </script>
  <script type='text/javascript' src='../../../dwr/media/menu.js'> </script>
</head>
<body>
<div id='header'><a href='http://directwebremoting.org/dwr/'>Direct Web Remoting</a></div>
<div id=pagelinks>
<div class='navlinks'>[ 
<a href='/dwr' title='Easy Ajax for Java'>DWR</a> | 
<a href='/blog/joe' title='Joe&#039;s Blog about DWR and Ajax'>Blog</a>
 ]
<form method='GET' action='http://www.google.com/search' id='search-form'>
<span id='search'>
<input class='form-text' type='text' id='search-box' name='as_q' size='20' maxlength='255'>
<input type='hidden' name='as_sitesearch' value='directwebremoting.org'/>
<input class='form-submit' type='submit' value='Google'/>
</span>
</form>
</div>
<div id='breadcrumbs'><a href='../../../dwr/index.html'>DWR - Easy Ajax for JAVA</a> &#x00BB; <a href='../../../dwr/development/index.html'>Development</a> &#x00BB; <a href='../../../dwr/development/notes/index.html'>Developers Notes</a> &#x00BB; <a href='design.html' class='currentLink'>Design Notes</a></div></div>

<h2>Warning: Developer Pages</h2>

<p>This page is part of a set of pages aimed at DWR developers. If this isn't you, then you probably want the <a href="../../documentation.html">documentation index</a>.</p>

<h1>Design Notes</h1>

<p>DWR is comprised of a number of components that are designed to be as separate as possible. They are:</p>

<ul>
<li>AccessControl. What methods are remote systems allowed to access?</li>
<li>ConverterManager. Provides DWRP <-> Java conversion. (It is likely that we will have a Marshaller interface which wraps this at some stage because ConverterManager is tied to DWRP)</li>
<li>CreatorManager. In charge of deciding what classes to remote</li>
<li>WebContextBuilder. DWR allows execution of arbitary methods. These methods may like some context about how they have been invoked.</li>
<li>AjaxFilterManager. Allows filters to key into the invocation process.</li>
<li>Processor. Actually process an inbout request</li>
</ul>

<p>These components are registered in an IoC container (which is itself abstracted via a Container interface)</p>

<h1>The Startup Process</h1>

<p>The first step is to initialize the IoC container. This must be the first step because it is expected that some usages of DWR (like Spring for example) will use an external IoC container, so IoC container setup may be outside the control of DWR.</p>

<p>It is recognized that there are some limitations in simply leaving that to be the only part of the configuration process. In the Spring case it would require a very verbose config file since DWR needs to provide a default config that users then build upon.</p>

<h1>The Converter Interface</h1>

<p>The Converter implementations MUST do the push/pop of context even though it would be more of help if the framework could do it for us. This is because the MapConverter needs to push/pop for the name AND the value.</p>

<p>Converters can't work by being told just the type to convert to because collection converters still need to ask because they recur down into other converters. Context is key to knowing how to convert so we need to keep a track of the type conversion context as it evolves.</p>

<h1>The Creator Interface</h1>

<p>Creators need both getType and newImplementation methods even though you can derive the type by creating an implementation. This is because we need to know the Method before we call newImplementation, because if the method is static we don't need a 'this'. But we need the type before we can get the method.</p>

<ul class='menu' id='nav'>
<li class='noChildren'><a href='../../../dwr/index.html'>Home</a></li>
<li class='noChildren'><a href='../../../dwr/download.html'>Download</a></li>
<li class='hasChildren'><a href='../../../dwr/browser/index.html'>Client Side&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/browser/index.html'>Index</a></li>
<li class='noChildren'><a href='../../../dwr/browser/tibco.html'>DWR and TIBCO</a></li>
<li class='hasChildren'><a href='../../../dwr/browser/engine/index.html'>engine.js&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/browser/engine/index.html'>Index</a></li>
<li class='noChildren'><a href='../../../dwr/browser/engine/static.html'>Caching engine.js</a></li>
<li class='noChildren'><a href='../../../dwr/browser/engine/batch.html'>Call Batching</a></li>
<li class='noChildren'><a href='../../../dwr/browser/engine/ordering.html'>Call Ordering</a></li>
<li class='noChildren'><a href='../../../dwr/browser/engine/errors.html'>Errors and Timeouts</a></li>
<li class='noChildren'><a href='../../../dwr/browser/engine/hooks.html'>Remoting Hooks</a></li>
<li class='noChildren'><a href='../../../dwr/browser/engine/options.html'>Remoting Options</a></li>
</ul>
</li>
<li class='noChildren'><a href='../../../dwr/browser/gi.html'>gi.js</a></li>
<li class='hasChildren'><a href='../../../dwr/browser/util/index.html'>util.js&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/browser/util/index.html'>Index</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/lists.html'>List Manipulation</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/$.html'>$()</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/tables.html'>Table Manipulation</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/addOptions.html'>addOptions</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/addRows.html'>addRows</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/byId.html'>byId()</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/escapeHtml.html'>escapeHtml</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/getText.html'>getText</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/getValue.html'>getValue</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/getValues.html'>getValues</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/onReturn.html'>onReturn</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/removeAllOptions.html'>removeAllOptions</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/removeAllRows.html'>removeAllRows</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/selectRange.html'>selectRange</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/setValue.html'>setValue</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/setValues.html'>setValues</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/toDescriptiveString.html'>toDescriptiveString</a></li>
<li class='noChildren'><a href='../../../dwr/browser/util/useLoadingMessage.html'>useLoadingMessage</a></li>
</ul>
</li>
<li class='noChildren'><a href='../../../dwr/browser/extra-data.html'>Callbacks and Scoping</a></li>
<li class='noChildren'><a href='../../../dwr/browser/other.html'>Submission box</a></li>
<li class='noChildren'><a href='../../../dwr/browser/support.html'>Browser Support</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../../dwr/reverse-ajax/index.html'>Reverse Ajax&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/reverse-ajax/index.html'>Index</a></li>
<li class='noChildren'><a href='../../../dwr/reverse-ajax/getting-started.html'>Getting Started</a></li>
<li class='noChildren'><a href='../../../dwr/reverse-ajax/configuration.html'>Configuring</a></li>
<li class='noChildren'><a href='../../../dwr/reverse-ajax/threads.html'>Non-Web Threads</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../../dwr/development/index.html'>Development&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/development/index.html'>Index</a></li>
<li class='hasChildren'><a href='../../../dwr/development/contributor/index.html'>Contributors&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/development/contributor/index.html'>Index</a></li>
<li class='noChildren'><a href='../../../dwr/development/contributor/contract.html'>The Maintainer Contract</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../../dwr/development/notes/index.html'>Developers Notes&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/development/notes/index.html'>Index</a></li>
<li class='noChildren'><a href='../../../dwr/development/notes/batch-data.html'>DWREngine data </a></li>
<li class='noChildren'><a href='design.html' class='currentLink'>Design Notes</a></li>
<li class='noChildren'><a href='../../../dwr/development/notes/engine.html'>Engine.js Notes</a></li>
<li class='noChildren'><a href='../../../dwr/development/notes/poll-actions.html'>Polling Actions</a></li>
</ul>
</li>
<li class='noChildren'><a href='../../../dwr/development/ccla.html'>CLA for Corporations</a></li>
<li class='noChildren'><a href='../../../dwr/development/icla.html'>CLA for Individuals</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../../dwr/other/index.html'>Other Topics&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/other/index.html'>Index</a></li>
<li class='noChildren'><a href='../../../dwr/other/fixes.html'>Common Problems</a></li>
<li class='hasChildren'><a href='../../../dwr/other/changelog/index.html'>Change Log&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/other/changelog/index.html'>Index</a></li>
<li class='noChildren'><a href='../../../dwr/other/changelog/dwr20.html'>New in v2.0</a></li>
<li class='noChildren'><a href='../../../dwr/other/changelog/dwr20m2.html'>New in v2.0m2</a></li>
<li class='noChildren'><a href='../../../dwr/other/changelog/dwr20m1.html'>New in v2.0m1</a></li>
<li class='noChildren'><a href='../../../dwr/other/changelog/dwr11.html'>New in v1.1</a></li>
<li class='noChildren'><a href='../../../dwr/other/changelog/dwr20m3.html'>New in v2.0m3</a></li>
<li class='noChildren'><a href='../../../dwr/other/changelog/dwr30.html'>New in v3.0</a></li>
</ul>
</li>
<li class='noChildren'><a href='../../../dwr/other/glossary.html'>Glossary</a></li>
<li class='noChildren'><a href='../../../dwr/other/elsewhere.html'>Tutorials Elsewhere</a></li>
<li class='hasChildren'><a href='../../../dwr/other/upgrading/index.html'>Upgrading DWR&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/other/upgrading/index.html'>Index</a></li>
<li class='noChildren'><a href='../../../dwr/other/upgrading/dwr20.html'>Upgrading to Version 2.0</a></li>
<li class='noChildren'><a href='../../../dwr/other/upgrading/dwr30.html'>Upgrading to Version 3.0</a></li>
</ul>
</li>
<li class='noChildren'><a href='../../../dwr/other/errors.html'>Error Handling</a></li>
<li class='noChildren'><a href='../../../dwr/other/related.html'>Related Projects</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../../dwr/introduction/index.html'>Overview&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/introduction/index.html'>Index</a></li>
<li class='noChildren'><a href='../../../dwr/introduction/getting-started.html'>Getting Started</a></li>
<li class='noChildren'><a href='../../../dwr/introduction/scripting-dwr.html'>Scripting DWR</a></li>
<li class='noChildren'><a href='../../../dwr/introduction/tutorials.html'>Tutorials and Examples</a></li>
<li class='noChildren'><a href='../../../dwr/introduction/live.html'>Who is using DWR</a></li>
<li class='noChildren'><a href='../../../dwr/introduction/hints.html'>Hints and Tips</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../../dwr/security/index.html'>Security&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/security/index.html'>Index</a></li>
<li class='noChildren'><a href='../../../dwr/security/script-tag-protection.html'>JavaScript Security</a></li>
<li class='noChildren'><a href='../../../dwr/security/allowGetForSafariButMakeForgeryEasier.html'>Safari, GET and CSRF</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../../dwr/server/index.html'>Server Side&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/server/index.html'>Index</a></li>
<li class='noChildren'><a href='../../../dwr/server/fluent.html'>Fluent Configuration</a></li>
<li class='noChildren'><a href='../../../dwr/server/annotations.html'>Annotations</a></li>
<li class='hasChildren'><a href='../../../dwr/server/integration/index.html'>Integrating with ...&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/server/integration/index.html'>Index</a></li>
<li class='noChildren'><a href='../../../dwr/server/integration/jaxer.html'>Aptana Jaxer</a></li>
<li class='noChildren'><a href='../../../dwr/server/integration/guice.html'>Guice</a></li>
<li class='noChildren'><a href='../../../dwr/server/integration/hibernate.html'>Hibernate</a></li>
<li class='noChildren'><a href='../../../dwr/server/integration/spring.html'>Spring</a></li>
<li class='noChildren'><a href='../../../dwr/server/integration/struts.html'>Struts</a></li>
<li class='noChildren'><a href='../../../dwr/server/integration/webwork.html'>Webwork</a></li>
<li class='noChildren'><a href='../../../dwr/server/integration/jsf.html'>JSF</a></li>
<li class='noChildren'><a href='../../../dwr/server/integration/pageflow.html'>Pageflow / Beehive</a></li>
<li class='noChildren'><a href='../../../dwr/server/integration/xul.html'>XUL</a></li>
</ul>
</li>
<li class='noChildren'><a href='../../../dwr/server/environment.html'>Supported Environments</a></li>
<li class='hasChildren'><a href='../../../dwr/server/servlet/index.html'>WEB-INF Reference&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/server/servlet/index.html'>Index</a></li>
<li class='noChildren'><a href='../../../dwr/server/servlet/logging.html'>Logging</a></li>
<li class='noChildren'><a href='../../../dwr/server/servlet/multiconfig.html'>Multiple dwr.xml files</a></li>
<li class='noChildren'><a href='../../../dwr/server/servlet/plugin.html'>Plug-ins</a></li>
<li class='noChildren'><a href='../../../dwr/server/servlet/test.html'>Test Mode</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../../dwr/server/dwrxml/index.html'>dwr.xml&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/server/dwrxml/index.html'>Index</a></li>
<li class='hasChildren'><a href='../../../dwr/server/dwrxml/converters/index.html'>Converters&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/server/dwrxml/converters/index.html'>Index</a></li>
<li class='noChildren'><a href='../../../dwr/server/dwrxml/converters/array.html'>Arrays</a></li>
<li class='noChildren'><a href='../../../dwr/server/dwrxml/converters/bean.html'>Beans / Objects</a></li>
<li class='noChildren'><a href='../../../dwr/server/dwrxml/converters/collection.html'>Collections</a></li>
<li class='noChildren'><a href='../../../dwr/server/dwrxml/converters/dom.html'>DOM Objects</a></li>
<li class='noChildren'><a href='../../../dwr/server/dwrxml/converters/enum.html'>Enum</a></li>
<li class='noChildren'><a href='../../../dwr/server/dwrxml/converters/file.html'>Images and Binary Files</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../../dwr/server/dwrxml/creators/index.html'>Creators&nbsp;...</a><ul>
<li class='noChildren'><a href='../../../dwr/server/dwrxml/creators/index.html'>Index</a></li>
<li class='noChildren'><a href='../../../dwr/server/dwrxml/creators/new.html'>'New' Creator</a></li>
<li class='noChildren'><a href='../../../dwr/server/dwrxml/creators/scripted.html'>'Scripted' Creator</a></li>
</ul>
</li>
<li class='noChildren'><a href='../../../dwr/server/dwrxml/filters.html'>Filters</a></li>
<li class='noChildren'><a href='../../../dwr/server/dwrxml/signatures.html'>Signatures</a></li>
</ul>
</li>
<li class='noChildren'><a href='../../../dwr/server/generic.html'>Reading from other URLs</a></li>
<li class='noChildren'><a href='../../../dwr/server/javaapi.html'>Accessing Servlet Objects</a></li>
</ul>
</li>
<li class='noChildren'><a href='../../../dwr/support.html'>Support</a></li>
<li class='noChildren'><a href='../../../dwr/languages.html'>Non-English Docs</a></li>
<li class='noChildren'><a href='../../../dwr/documentation.html'>Doc Index</a></li>
</ul>
</body>
</html>
