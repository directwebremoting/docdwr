<!DOCTYPE html>
<html>
<head>
  <title>Hints and Tips</title>
  <meta name='nid' content='100'>
  <meta name='parent' content='28'>
  <meta name='weight' content='-9'>
  <meta name='filename' content='dwr/hints.html'>
  <meta name='alias' content='/dwr/hints'>
  <link rel="stylesheet" type="text/css" href="../styles.css">
</head>
<body>

<h1>Hint and Tips for Working with DWR</h1>

<p>This is a new list of things to look at to help you when working with DWR. Please add comments on the things that have helped you...</p>

<h2>Improve the loading message</h2>

<p>The useLoadingMessage() function in DWR 1.0 has some flaws (like you can't customize the message and you need to be a bit careful when you call it) You can fix these flaws with some simple cut and paste of a new version of this function. The <a href="../browser/util/useloadingmessage.html">documentation for <code>useLoadingMessage()</code></a> has more details.</p>


<h2>Use the server console</h2>

<p>DWR does some fairly verbose error reporting, which can help a lot in working out what has gone wrong with your application. If there is anything wrong you should take careful note of messages when your container is starting and when the error happens. Generally errors will be output at the WARNING or ERROR levels, but reading INFO level messages might help too.</p>

<p>If you do get log message telling you something is wrong, but need to know more, make sure you can read INFO level messages because DWR sometimes outputs informational log messages with background information when something has gone wrong.</p>

<h2>Use the debug/test pages</h2>

<p>Another useful helper when something is broken is the debug/test pages (See <code>http://localhost:8080/<i>[YOUR-WEBAPP]</i>/dwr</code>). Basic use of these pages is covered in the <a href="getting-started.html">getting started</a> guide, but it's worth remembering when things are broken because sometimes these pages will give you more information about what is going wrong.</p>

<h2>Accessing HttpServletRequest</h2>

<p>You can <a href="../server/javaapi.html">access HttpServletRequest</a> and associated objects.</p>

<h2>Passing extra data to callbacks</h2>

<p>It's common to need to pass extra information to a callback method, but since all callback methods have only one parameter (the return code from the remote method) this can be tricky. There is a <a href="../browser/extra-data.html">whole page dedicated to helping you with this problem</a>.</p>

<h2>Tuning Server Performance</h2>

<p><strong>CPU bottlenecks</strong>: DWR has been looked at by some fairly serious performance gurus who told us that DWR was basically irrelevant to performance. Time spent inside DWR is swamped by the web server and by the network. If you really need to tighten things up then you should reduce logging to error and fatal levels only, but the main job will be looking at your own code.</p>

<p><strong>Network bottlenecks</strong>: Starting with version 2.0 DWR manages cache lifetime so the browser does not read more data than it needs to. Previous versions of DWR may leave the browser assuming that it needs to re-read the DWR javascript more often than it really does.</p>

<p>There is a simple solution to this issue in version 1 - copy the JavaScript files into your web-app and refer to them from there so the webserver can do what it is good at. You could also consider merging all your JavaScript files into a single file and running the <a href="http://dojotoolkit.org/docs/shrinksafe">DOJO compressor</a> on them to save more space.</p>

<p>The situation in DWR 2.0 is slightly more complex because engine.js is dynamically generated, so you should not include this file in any compression scheme when using 2.0. We hope to remove the need for the dynamic parts of engine.js in version 2.1 and to add an inline script compressor.</p>

</body>
</html>
