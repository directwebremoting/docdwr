<!DOCTYPE html>
<html>
<head>
  <title>dwr.xml</title>
  <meta name='alias' content='/dwr/server/configuration/dwrxml'>
  <link rel="stylesheet" type="text/css" href="../../../media/styles.css">
</head>
<body>

<h1>Configuring DWR - dwr.xml</h1>

<p>The dwr.xml file is the standard way to configure DWR. By default you need to put it in the WEB-INF folder alongside web.xml.</p>

<h2>DTD</h2>

<p>In addition to this documentation here there is also a <a href="http://directwebremoting.org/schema/dwr30.dtd">DTD</a> for dwr.xml and a <a href="http://directwebremoting.org/dwr/dwr30.dtd">reference section</a> that is generated by <a href="http://dtddoc.sourceforge.net/">DTDDoc</a>.</p>

<h2>Creating a dwr.xml file</h2>

<p>dwr.xml has the following structure:</p>

<pre>
&lt;!DOCTYPE dwr PUBLIC
    "-//GetAhead Limited//DTD Direct Web Remoting 3.0//EN"
    "<a href="http://directwebremoting.org/schema/dwr30.dtd">http://directwebremoting.org/schema/dwr30.dtd</a>"&gt;

&lt;dwr&gt;

  <span style="color:#060;">&lt;!-- init is only needed if you are extending DWR --&gt;</span>
  <span style="color:#AAA;">&lt;init&gt;
    &lt;creator id="..." class="..."/&gt;
    &lt;converter id="..." class="..."/&gt;
  &lt;/init&gt;</span>

  <span style="color:#060;">&lt;!-- without allow, DWR isn't allowed to do anything --&gt;</span>
  &lt;allow&gt;
    &lt;filter class="..."/&gt;
    &lt;create creator="..." javascript="..."/&gt;
    &lt;convert converter="..." match="..."/&gt;
  &lt;/allow&gt;

  <span style="color:#060;">&lt;!-- you may need to tell DWR about method signatures --&gt;</span>
  &lt;signatures&gt;
    ...
  &lt;/signatures&gt;

&lt;/dwr&gt;
</pre>

<h2>Terminology</h2>

<p>Some terminology worth understanding - parameters are <i>converted</i>, but the remoted beans are <i>created</i>. So if you have a bean A with a method <code>A.blah(B)</code> then you need a <i>creator</i> for A and a <i>converter</i> for B.</p>

<h2>&lt;allow&gt;</h2>

<p>The 'allow' section defines which classes DWR can create and convert, and the global filters to use.  This section is required for DWR to function - without it DWR is not allowed to do anything.</p>

<h3>Creators</h3>

<p>Each class which we intend to execute methods on, needs a <code>&lt;create ...&gt;</code> entry. There are several types of creator. The most commonly used creators are the New creator specified with the 'new' keyword or the Spring framework creator specified with the 'spring' keyword. For more information, see the <a href="creators/index.html">Creator</a> documentation.</p>

<h3>Converters</h3>

<p>We need to ensure that all the parameters can be converted. Many of the types provided by the JDK are converted by DWR automatically for you, but you need to give DWR permission to convert your own code. Generally this means that JavaBean parameters will need a <code>&lt;convert ...&gt;</code> entry.</p>

<p>By default all of the following are converted for you without further declaration:</p>

<ul>
<li>All primitive types, boolean, int, double, etc.</li>
<li>The Class based versions of the these Boolean, Integer, etc.</li>
<li>java.lang.String</li>
<li>java.util.Date and the 3 SQL derivatives</li>
<li>arrays of the above</li>
<li>Collections (Lists, Sets, Maps, Iterators, etc) of the above</li>
<li>DOM objects (like Element and Document) from DOM, XOM, JDOM and DOM4J</li>
<li>BLOBs like byte[], java.io.InputStream, java.awt.image.BufferedImage or org.directwebremoting.io.FileTransfer can be downloaded by browsers, or displayed as images.</li>
<li>Javascript functions can be converted to instances of org.directwebremoting.io.JavascriptFunction for later invocation.</li>
<li>Thrown instances of org.directwebremoting.io.DwrConvertedException are automatically passed to the client.</li>
<li>Server-side versions of the TIBCO GI CDF Document: jsx3.xml.CdfDocument.</li>
</ul>

<p>For details on how to convert your own JavaBeans and other parameters see the <a href="converters/index.html">Converter</a> documentation.</p>

<h3>Filters</h3>

<p>Filters are a way to take some action either before, or after a server call, or to prevent the call from happening at all. For more information, see the <a href="filters.html">Filter</a> documentation.</p>

<h2>&lt;init&gt;</h2>

<p>The optional init section declares the classes that can be used to create beans to remote and the classes that can be used to convert beans in the marshalling process. For most cases you will not need to use it. If you wish to define a new Creator <small>[<a href="http://directwebremoting.org/dwr-javadoc/org/directwebremoting/extend/Creator.html">JavaDoc</a>]</small> or Converter <small>[<a href="http://directwebremoting.org/dwr-javadoc/org/directwebremoting/extend/Converter.html">JavaDoc</a>]</small> it needs to be declared here, but do double-check on the ones that are currently available first.</p>

<p>Having an entry in the init section just tells DWR about the existence of the class and gives it some basic detail about how it works. It does not bring it into use. In this way it is a bit like an import statement in Java. Most classes must be imported before use, but just having an import does not mean that the class is being used. Each creator and converter has an id attribute to allow it to be referred to later on.</p>

<h2>&lt;signatures&gt;</h2>

<p>DWR uses reflection to find out what types it should use in the conversion process. Sometimes the type information is not available, in which case you can type the method signatures in here to give it a hint. See the <a href="signatures.html">signatures</a> section for more detail.</p>

<h2>Multiple dwr.xml Files</h2>

<p>There can be more than one dwr.xml file (see <a href="../servlet/index.html">the web.xml documentation</a> for more details). The entries in each are added together. This ability is used by DWR to load the basic config file to get everyone started. <br/> We can get a good introduction to dwr.xml files by looking at the standard dwr.xml file that everyone gets for free in the dwr.jar.</p>

</body>
</html>
