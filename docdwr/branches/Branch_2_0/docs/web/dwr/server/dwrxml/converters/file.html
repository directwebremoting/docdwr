<!DOCTYPE html>
<html>
<head>
  <title>Image and Binary File Conversion</title>
  <meta name='alias' content='/dwr/server/dwrxml/converters/file'>
  <meta name='navTitle' content='Images and Binary Files'>
  <link rel="stylesheet" type="text/css" href="../../../media/styles.css">
</head>
<body>

<h1>Image and Binary File Conversion</h1>

<p>DWR 3.0 features a new FileConverter that handles the following binary files:</p>

<ul>
<li>Images (any child of java.awt.BufferedImage)</li>
<li>InputStreams (any child of java.io.InputStream)</li>
<li>FileTransfer objects (org.directwebremoting.io.FileTransfer)</li>
</ul>

<p>In order for upload to work, <a href="http://commons.apache.org/fileupload/">commons-fileupload</a> and <a href="http://commons.apache.org/io/">commons-io</a> are required on the classpath. See the <a href="http://commons.apache.org/fileupload/dependencies.html">commons-upload dependency chart</a> for more information. DWR will give you the error message: "file uploads not supported" if this JAR file is missing.</p>

<h1>Specifying a max upload size</h1>
If you would like to limit the maximum allowed size of file uploads we provide the "fileUploadMaxBytes" init-param on the DWR servlet.  This parameter can be specified as follows:
     <pre>
     &lt;init-param&gt;
      &lt;param-name>fileUploadMaxBytes&lt;/param-name&gt;
      &lt;param-value>5000&lt;/param-value&gt;
     &lt;/init-param&gt;</pre>
<h1>Plugging in a custom Upload implementation</h1>
The FileUpload implementation used by DWR is also pluggable.  If you would like to write your own implementation simply implement org.directwebremoting.dwrp.FileUpload and use DWR's plug-in architecture to specify the implementation via an init-param on the DWR servlet.
  <pre>
    &lt;init-param&gt;
     &lt;param-name>org.directwebremoting.dwrp.FileUpload&lt;/param-name&gt;
     &lt;param-value>your.package.YourFileUploadImpl&lt;/param-value&gt;
    &lt;/init-param&gt;</pre>
<h1>Examples in the DWR.war</h1>
<p>The DWR war file contains a number of examples of generating PDF files, as well as uploading and downloading images. Full source and explanations are included with these examples.</p>

</body>
</html>
